import{a as ne,w as ie}from"./chunk-SK7HALIS.js";import{A as X,Q as Y,R as ee,ba as te,f as Q,m as S,n as v}from"./chunk-UUMLZO6W.js";import{Db as H,Ea as U,Eb as L,G as O,Jb as I,Mc as Z,O as k,Qb as A,R as F,Sb as b,Tc as q,V as M,Xb as C,Xc as w,Yc as J,ac as d,bc as m,cc as P,ea as x,f as g,ga as E,ha as u,i as $,ia as f,j,k as D,nc as _,oa as h,oc as B,p as T,pa as R,pc as V,q as y,sb as c,ua as p,vc as W,wc as G,xb as z,xc as K}from"./chunk-NYEYZBOW.js";var ae=class n{http=p(v);countryFacade=p(ie);translateService=p(X);apiUrl=`${ne.apiUrl}/gc-categories`;categoriesCache={};getCategories(){let a=this.translateService.currentLang||"en";return this.countryFacade.selectedCountryCode$.pipe(F(1),u(t=>{let o=`${t||"default"}_${a}`;return this.categoriesCache[o]?this.categoriesCache[o]:t?(this.categoriesCache[o]=this.fetchCategories(t,a).pipe(x(1)),this.categoriesCache[o]):(console.warn("No country code selected, using default API call"),this.categoriesCache[o]=this.fetchCategories("",a).pipe(x(1)),this.categoriesCache[o])}))}clearCache(){this.categoriesCache={}}fetchCategories(a,t){let o=new S({lang:t}),r={country_code:a,parent_id:16};return new g(e=>{this.http.post(this.apiUrl,r,{headers:o}).subscribe({next:i=>{if(i.status==="Success"&&i.data){let s=i.data.map(l=>({id:l.id,name:t==="ar"?l.web_name_ar:l.web_name_en,image:l.image,link:`/category/${l.id}`}));e.next(s),e.complete()}else e.error("Invalid response format")},error:i=>{console.error("Error fetching categories:",i),e.error(i)}})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})};var ce=["*"];function pe(n,a){n&1&&(d(0,"span",2),P(1,"i",3)(2,"i",3)(3,"i",3)(4,"i",3),m())}function le(n,a){}function de(n,a){if(n&1&&(d(0,"div",6),G(1),m()),n&2){let t=_(2);c(),K(t.nzTip)}}function me(n,a){if(n&1&&(d(0,"div")(1,"div",4),I(2,le,0,0,"ng-template",5)(3,de,2,1,"div",6),m()()),n&2){let t=_(),o=W(1);c(),b("ant-spin-rtl",t.dir==="rtl")("ant-spin-spinning",t.isLoading)("ant-spin-lg",t.nzSize==="large")("ant-spin-sm",t.nzSize==="small")("ant-spin-show-text",t.nzTip),c(),A("ngTemplateOutlet",t.nzIndicator||o),c(),C(t.nzTip?3:-1)}}function ge(n,a){if(n&1&&(d(0,"div",7),V(1),m()),n&2){let t=_();b("ant-spin-blur",t.isLoading)}}var oe="spin",Fe=(()=>{let n,a=[],t=[];return class N{static{let r=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[ee()],T(null,null,n,{kind:"field",name:"nzIndicator",static:!1,private:!1,access:{has:e=>"nzIndicator"in e,get:e=>e.nzIndicator,set:(e,i)=>{e.nzIndicator=i}},metadata:r},a,t),r&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}nzConfigService;cdr;directionality;_nzModuleName=oe;nzIndicator=y(this,a,null);nzSize=(y(this,t),"default");nzTip=null;nzDelay=0;nzSimple=!1;nzSpinning=!0;destroy$=new $;spinning$=new j(this.nzSpinning);delay$=new D(1);isLoading=!1;dir="ltr";constructor(r,e,i){this.nzConfigService=r,this.cdr=e,this.directionality=i}ngOnInit(){this.delay$.pipe(E(this.nzDelay),M(),u(e=>e===0?this.spinning$:this.spinning$.pipe(k(i=>O(i?e:0)))),f(this.destroy$)).subscribe(e=>{this.isLoading=e,this.cdr.markForCheck()}),this.nzConfigService.getConfigChangeEventForComponent(oe).pipe(f(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.directionality.change?.pipe(f(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(r){let{nzSpinning:e,nzDelay:i}=r;e&&this.spinning$.next(this.nzSpinning),i&&this.delay$.next(this.nzDelay)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||N)(z(Y),z(q),z(te))};static \u0275cmp=H({type:N,selectors:[["nz-spin"]],hostVars:2,hostBindings:function(e,i){e&2&&b("ant-spin-nested-loading",!i.nzSimple)},inputs:{nzIndicator:"nzIndicator",nzSize:"nzSize",nzTip:"nzTip",nzDelay:[2,"nzDelay","nzDelay",J],nzSimple:[2,"nzSimple","nzSimple",w],nzSpinning:[2,"nzSpinning","nzSpinning",w]},exportAs:["nzSpin"],features:[U],ngContentSelectors:ce,decls:4,vars:2,consts:[["defaultTemplate",""],[1,"ant-spin-container",3,"ant-spin-blur"],[1,"ant-spin-dot","ant-spin-dot-spin"],[1,"ant-spin-dot-item"],[1,"ant-spin"],[3,"ngTemplateOutlet"],[1,"ant-spin-text"],[1,"ant-spin-container"]],template:function(e,i){e&1&&(B(),I(0,pe,5,0,"ng-template",null,0,Z)(2,me,4,12,"div")(3,ge,2,2,"div",1)),e&2&&(c(2),C(i.isLoading?2:-1),c(),C(i.nzSimple?-1:3))},dependencies:[Q],encapsulation:2})}})(),Me=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=L({type:n});static \u0275inj=R({})}return n})();var se=class n{http=p(v);apiUrl="https://dev.zaintawseel.com/api/v1/gc-subcategories";getSubcategories(a,t,o){let r=new S({lang:o}),e={parent_id:a,country_code:t};return new g(i=>{this.http.post(this.apiUrl,e,{headers:r}).subscribe({next:s=>{s.status==="Success"&&s.data?(i.next(s.data),i.complete()):i.error("Invalid response format")},error:s=>{console.error(`Error fetching subcategories for parent ID ${a}:`,s),i.error(s)}})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})};export{ae as a,Fe as b,Me as c,se as d};
